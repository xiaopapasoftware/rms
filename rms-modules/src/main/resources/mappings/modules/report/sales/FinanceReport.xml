<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.report.dao.ContractReportDao">

    <select id="queryFinance" resultType="java.util.Map" parameterType="com.thinkgem.jeesite.common.filter.search.Criterion">
        select tr.receipt_date,tr.receipt_amount,tpp.project_name,tb.building_name,th.house_no,tro.room_no
        from t_receipt tr
        left join t_trading_accounts tta on tr.trading_accounts_id = tta.id and tta.del_flag=0
        left join t_payment_trade tpt on tpt.trade_id = tta.id and tpt.del_flag=0
        left join t_payment_trans tpta on tpta.id = tpt.trans_id and tpta.del_flag=0
        left join t_rent_contract trc on tpta.trans_id = trc.id

        left join t_building tb on trc.building_id = tb.id and tb.del_flag =0
        left join t_property_project tpp on tb.t_property_project_main_id = tpp.id and tpp.del_flag =0
        left join t_house th on trc.house_id = th.id and th.del_flag =0
        left join t_room tro on trc.room_id = tro.id and tr.del_flag =0
        where tr.del_flag=0

        ${whereSqlString}
        <if test="orderBy != null">
            ${orderBySqlString}
        </if>

    </select>
</mapper>